---
import { MapPin } from "lucide-react";
const { coordinates, locationName, zipCodes } = Astro.props;
const mapLat = coordinates?.lat || "";
const mapLng = coordinates?.lng || "";
---

<section
    class="w-full h-[450px] bg-secondary border-t border-heading/10 relative z-10 grayscale hover:grayscale-0 transition-all duration-700"
>
    {
        mapLat && mapLng ? (
            <iframe
                src={`https://www.google.com/maps?q=${mapLat},${mapLng}&t=&z=14&ie=UTF8&iwloc=&output=embed`}
                title={`Mapa de ${locationName} - Google Maps`}
                width="100%"
                height="100%"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
                class="opacity-90 hover:opacity-100 transition-opacity"
            />
        ) : (
            <iframe
                src={`https://www.google.com/maps?q=${encodeURIComponent(locationName)}&t=&z=14&ie=UTF8&iwloc=&output=embed`}
                title={`Mapa de ${locationName} - Google Maps`}
                width="100%"
                height="100%"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
                class="opacity-90 hover:opacity-100 transition-opacity"
            />
        )
    }

    <div
        class="absolute bottom-6 left-6 bg-surface/95 backdrop-blur p-4 rounded-lg shadow-xl border border-heading/10 max-w-sm pointer-events-none"
    >
        <h3 class="font-bold text-heading mb-2 flex items-center gap-2">
            <MapPin className="w-5 h-5 text-primary" />
            Zona de Servicio: {locationName}
        </h3>
        {
            zipCodes && (
                <p class="text-body text-sm">
                    CÃ³digos Postales: {zipCodes.join(", ")}
                </p>
            )
        }
    </div>
</section>
