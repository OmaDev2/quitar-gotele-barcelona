---
import Layout from "../layouts/Layout.astro";
import Footer from "../components/Footer.astro";
import { Cookie } from "lucide-react";
import { getSettings } from "../lib/settings";

import { getEntry } from "astro:content";

// Fetch Global Settings
const { siteName, legalEmail: email } = await getSettings();

const legalEntry = await getEntry("legal", "cookies");
const { Content } = legalEntry ? await legalEntry.render() : { Content: null };
---

<Layout
    title={`Política de Cookies | ${siteName}`}
    description={`Información sobre el uso de cookies en el sitio web ${siteName}`}
    noindex={true}
>
    <section class="py-20 bg-secondary">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto">
                <div class="text-center mb-12">
                    <div class="flex items-center justify-center gap-3 mb-6">
                        <Cookie className="w-8 h-8 text-primary" />
                        <h1
                            class="text-4xl font-heading font-bold text-heading"
                        >
                            Política de Cookies
                        </h1>
                    </div>
                    <p class="text-body/70">
                        Última actualización: {
                            new Date().toLocaleDateString("es-ES", {
                                year: "numeric",
                                month: "long",
                                day: "numeric",
                            })
                        }
                    </p>
                </div>

                <div
                    class="prose prose-invert prose-headings:text-heading prose-p:text-body prose-strong:text-heading prose-li:text-body max-w-none"
                >
                    <div
                        class="bg-surface/50 border border-heading/10 rounded-xl p-8 space-y-6"
                    >
                    {
                        Content ? (
                            <Content />
                        ) : (
                            <section>
                                <h2 class="text-2xl font-bold text-heading mb-4">
                                    1. ¿Qué son las Cookies?
                                </h2>
                                <p class="text-body leading-relaxed">
                                    Las cookies son pequeños archivos de texto que
                                    se almacenan en su dispositivo (ordenador,
                                    tablet o móvil) cuando visita un sitio web.
                                    Permiten que el sitio web recuerde sus acciones
                                    y preferencias durante un período de tiempo.
                                </p>
                            </section>

                            <section>
                                <h2 class="text-2xl font-bold text-heading mb-4">
                                    2. Cookies que Utilizamos
                                </h2>
                                <p class="text-body leading-relaxed mb-4">
                                    Este sitio web utiliza las siguientes categorías
                                    de cookies:
                                </p>

                                <div class="space-y-4">
                                    <div
                                        class="bg-surface border border-heading/20 rounded-lg p-6"
                                    >
                                        <h3
                                            class="text-xl font-bold text-heading mb-3"
                                        >
                                            Cookies Técnicas (Necesarias)
                                        </h3>
                                        <p class="text-body leading-relaxed mb-2">
                                            Son esenciales para el funcionamiento
                                            del sitio web. Sin ellas, algunos
                                            servicios no pueden ser proporcionados.
                                        </p>
                                        <p class="text-sm text-body/70 mt-2">
                                            <strong class="text-heading"
                                                >Finalidad:</strong
                                            > Mantener la sesión del usuario, recordar
                                            preferencias básicas.
                                        </p>
                                        <p class="text-sm text-body/70">
                                            <strong class="text-heading"
                                                >Duración:</strong
                                            > Sesión
                                        </p>
                                        <p
                                            class="text-sm text-primary mt-2 font-bold"
                                        >
                                            ✓ No requieren consentimiento
                                        </p>
                                    </div>

                                    <div
                                        class="bg-surface border border-heading/20 rounded-lg p-6"
                                    >
                                        <h3
                                            class="text-xl font-bold text-heading mb-3"
                                        >
                                            Cookies Analíticas
                                        </h3>
                                        <p class="text-body leading-relaxed mb-2">
                                            Nos permiten analizar el uso del sitio
                                            web y mejorar la experiencia del
                                            usuario.
                                        </p>
                                        <p class="text-sm text-body/70 mt-2">
                                            <strong class="text-heading"
                                                >Proveedor:</strong
                                            > Google Analytics (si aplica)
                                        </p>
                                        <p class="text-sm text-body/70">
                                            <strong class="text-heading"
                                                >Finalidad:</strong
                                            > Estadísticas de visitas, páginas más visitadas,
                                            tiempo de navegación.
                                        </p>
                                        <p class="text-sm text-body/70">
                                            <strong class="text-heading"
                                                >Duración:</strong
                                            > Hasta 2 años
                                        </p>
                                        <p
                                            class="text-sm text-accent mt-2 font-bold"
                                        >
                                            ⚠️ Requieren consentimiento
                                        </p>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h2 class="text-2xl font-bold text-heading mb-4">
                                    3. Cookies de Terceros
                                </h2>
                                <p class="text-body leading-relaxed mb-3">
                                    Este sitio web puede utilizar servicios de
                                    terceros que establecen sus propias cookies:
                                </p>
                                <ul
                                    class="list-disc list-inside space-y-2 text-body ml-4"
                                >
                                    <li>
                                        <strong class="text-heading"
                                            >Google Analytics:</strong
                                        > Para análisis de tráfico y comportamiento de
                                        usuarios
                                    </li>
                                    <li>
                                        <strong class="text-heading"
                                            >Google Maps:</strong
                                        > Para mostrar mapas interactivos
                                    </li>
                                </ul>
                                <p class="text-body leading-relaxed mt-4">
                                    Estas cookies están sujetas a las políticas de
                                    privacidad de cada proveedor.
                                </p>
                            </section>

                            <section>
                                <h2 class="text-2xl font-bold text-heading mb-4">
                                    4. Gestión de Cookies
                                </h2>
                                <p class="text-body leading-relaxed mb-4">
                                    Puede gestionar y/o eliminar las cookies según
                                    sus preferencias. Para más información, visite <a
                                        href="https://www.aboutcookies.org"
                                        target="_blank"
                                        rel="noopener"
                                        class="text-primary hover:text-accent underline decoration-primary/30"
                                        >www.aboutcookies.org</a
                                    >
                                </p>

                                <h3 class="text-lg font-bold text-heading mb-3">
                                    Configuración del Navegador:
                                </h3>
                                <ul
                                    class="list-disc list-inside space-y-2 text-body ml-4"
                                >
                                    <li>
                                        <strong class="text-heading">Chrome:</strong>
                                        > Configuración > Privacidad y seguridad > Cookies
                                    </li>
                                    <li>
                                        <strong class="text-heading"
                                            >Firefox:</strong
                                        >
                                        Opciones > Privacidad y seguridad > Cookies
                                    </li>
                                    <li>
                                        <strong class="text-heading">Safari:</strong>
                                        > Preferencias > Privacidad > Cookies
                                    </li>
                                    <li>
                                        <strong class="text-heading">Edge:</strong> Configuración
                                        > Privacidad > Cookies
                                    </li>
                                </ul>

                                <div
                                    class="bg-primary/10 border border-primary/30 rounded-lg p-6 mt-6"
                                >
                                    <p class="text-body leading-relaxed">
                                        <strong class="text-primary"
                                            >Importante:</strong
                                        > Si bloquea o elimina las cookies, es posible
                                        que algunas funcionalidades del sitio web no funcionen
                                        correctamente.
                                    </p>
                                </div>
                            </section>

                            <section>
                                <h2 class="text-2xl font-bold text-heading mb-4">
                                    5. Consentimiento
                                </h2>
                                <p class="text-body leading-relaxed">
                                    Al navegar y continuar en este sitio web, usted
                                    acepta el uso de cookies según lo descrito en
                                    esta política. Puede retirar su consentimiento
                                    en cualquier momento modificando la
                                    configuración de su navegador.
                                </p>
                            </section>

                            <section>
                                <h2 class="text-2xl font-bold text-heading mb-4">
                                    6. Actualizaciones
                                </h2>
                                <p class="text-body leading-relaxed">
                                    Esta política de cookies puede ser actualizada
                                    periódicamente. Se recomienda revisarla
                                    regularmente para estar informado sobre cómo
                                    utilizamos las cookies.
                                </p>
                            </section>

                            <section>
                                <h2 class="text-2xl font-bold text-heading mb-4">
                                    7. Más Información
                                </h2>
                                <p class="text-body leading-relaxed">
                                    Para más información sobre el tratamiento de sus
                                    datos personales, consulte nuestra <a
                                        href="/privacidad/"
                                        class="text-primary hover:text-accent underline decoration-primary/30"
                                        >Política de Privacidad</a
                                    >.
                                </p>
                                <p class="text-body leading-relaxed mt-3">
                                    Para cualquier consulta sobre cookies, puede
                                    contactar en:
                                </p>
                                <p class="text-primary font-semibold mt-2">
                                    Email: {email}
                                </p>
                            </section>
                        )
                    }
                    </div>
                </div>
            </div>
        </div>
    </section>

    <Footer />
</Layout>
