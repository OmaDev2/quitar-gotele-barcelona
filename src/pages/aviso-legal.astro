---
import Layout from "../layouts/Layout.astro";
import Footer from "../components/Footer.astro";
import { Scale } from "lucide-react";
import { getSettings } from "../lib/settings";

import { getEntry } from "astro:content";

// Fetch Global Settings
const { siteName, city, niche, legalEmail: email, legalAddress: address, legalNIF: nif, legalName } = await getSettings();

// Fetch Legal Content from CMS
const legacyEntry = await getEntry("legal", "aviso-legal");
const { Content } = legacyEntry ? await legacyEntry.render() : { Content: null };
---

<Layout
    title={`Aviso Legal | ${siteName}`}
    description={`Aviso legal del sitio web ${siteName}`}
    noindex={true}
>
    <section class="py-20 bg-secondary">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto">
                <div class="text-center mb-12">
                    <div class="flex items-center justify-center gap-3 mb-6">
                        <Scale className="w-8 h-8 text-primary" />
                        <h1
                            class="text-4xl font-heading font-bold text-heading"
                        >
                            Aviso Legal
                        </h1>
                    </div>
                    <p class="text-body/70">
                        Última actualización: {
                            new Date().toLocaleDateString("es-ES", {
                                year: "numeric",
                                month: "long",
                                day: "numeric",
                            })
                        }
                    </p>
                </div>

                <div
                    class="prose prose-invert prose-headings:text-heading prose-p:text-body prose-strong:text-heading prose-li:text-body max-w-none"
                >
                    <div
                        class="bg-surface/50 border border-heading/10 rounded-xl p-8 space-y-6"
                    >
                    {
                        Content ? (
                            <Content />
                        ) : (
                            // FALLBACK CONTENT (if no CMS entry exists)
                        <section>
                            <h2 class="text-2xl font-bold text-heading mb-4">
                                1. Datos Identificativos
                            </h2>
                            <p class="text-body leading-relaxed">
                                En cumplimiento del artículo 10 de la Ley
                                34/2002, de 11 de julio, de Servicios de la
                                Sociedad de la Información y Comercio
                                Electrónico, se informa a los usuarios de los
                                datos identificativos del titular de este sitio
                                web:
                            </p>
                            <ul class="list-none space-y-2 mt-4 text-body">
                                <li>
                                    <strong class="text-heading"
                                        >Titular:</strong
                                    >
                                    {legalName}
                                </li>
                                <li>
                                    <strong class="text-heading"
                                        >NIF/CIF:</strong
                                    >
                                    {nif || "Pendiente de asignar"}
                                </li>
                                <li>
                                    <strong class="text-heading"
                                        >Domicilio:</strong
                                    >
                                    {address || "Dirección no disponible"}
                                </li>
                                <li>
                                    <strong class="text-heading">Email:</strong>
                                    {email || "info@ejemplo.com"}
                                </li>
                                <li>
                                    <strong class="text-heading"
                                        >Sitio web:</strong
                                    >
                                    {Astro.site?.host || "www.ejemplo.com"}
                                </li>
                            </ul>
                        </section>

                        <section>
                            <h2 class="text-2xl font-bold text-heading mb-4">
                                2. Objeto y Naturaleza del Servicio
                            </h2>
                            <p class="text-body leading-relaxed mb-4">
                                Este sitio web tiene como único objetivo <strong
                                    class="text-primary"
                                    >facilitar el contacto entre usuarios
                                    interesados en servicios de {
                                        niche.toLowerCase()
                                    }
                                    y profesionales del sector en {city}</strong
                                >.
                            </p>

                            <div
                                class="bg-primary/10 border border-primary/30 rounded-lg p-6 my-6"
                            >
                                <h3 class="text-xl font-bold text-primary mb-3">
                                    ⚠️ IMPORTANTE - Descargo de Responsabilidad
                                </h3>
                                <p class="text-body leading-relaxed">
                                    <strong
                                        >{siteName} NO presta servicios de {
                                            niche.toLowerCase()
                                        }</strong
                                    >. Este sitio web actúa únicamente como <strong
                                        >intermediario o plataforma de contacto</strong
                                    >
                                    entre usuarios y profesionales independientes
                                    del sector.
                                </p>
                                <p class="text-body leading-relaxed mt-3">
                                    La titular del sitio web <strong
                                        >NO se hace responsable</strong
                                    > de:
                                </p>
                                <ul
                                    class="list-disc list-inside space-y-2 mt-3 text-body"
                                >
                                    <li>
                                        La calidad de los trabajos realizados
                                        por los profesionales contactados
                                    </li>
                                    <li>
                                        Los presupuestos, plazos o condiciones
                                        acordadas entre el usuario y el
                                        profesional
                                    </li>
                                    <li>
                                        Cualquier incidencia, daño o perjuicio
                                        derivado de la contratación de servicios
                                    </li>
                                    <li>
                                        La veracidad de la información
                                        proporcionada por terceros
                                    </li>
                                </ul>
                                <p class="text-body leading-relaxed mt-3">
                                    <strong
                                        >Toda responsabilidad sobre los trabajos
                                        ejecutados recae exclusivamente en el
                                        profesional contratado.</strong
                                    >
                                </p>
                            </div>
                        </section>

                        <section>
                            <h2 class="text-2xl font-bold text-heading mb-4">
                                3. Condiciones de Uso
                            </h2>
                            <p class="text-body leading-relaxed mb-3">
                                El acceso y uso de este sitio web implica la
                                aceptación de las presentes condiciones. El
                                usuario se compromete a:
                            </p>
                            <ul
                                class="list-disc list-inside space-y-2 text-body ml-4"
                            >
                                <li>
                                    Utilizar el sitio web de forma lícita y
                                    conforme a la legislación vigente
                                </li>
                                <li>
                                    No realizar actividades fraudulentas o que
                                    puedan dañar la imagen del sitio
                                </li>
                                <li>
                                    Proporcionar información veraz en los
                                    formularios de contacto
                                </li>
                                <li>
                                    Respetar los derechos de propiedad
                                    intelectual e industrial
                                </li>
                            </ul>
                        </section>

                        <section>
                            <h2 class="text-2xl font-bold text-heading mb-4">
                                4. Propiedad Intelectual e Industrial
                            </h2>
                            <p class="text-body leading-relaxed">
                                Todos los contenidos de este sitio web (textos,
                                imágenes, diseño, logotipos, código fuente,
                                etc.) son propiedad de {siteName} o de terceros que
                                han autorizado su uso, y están protegidos por las
                                leyes de propiedad intelectual e industrial.
                            </p>
                            <p class="text-body leading-relaxed mt-3">
                                Queda prohibida la reproducción, distribución,
                                comunicación pública o transformación de los
                                contenidos sin autorización expresa del titular.
                            </p>
                        </section>

                        <section>
                            <h2 class="text-2xl font-bold text-heading mb-4">
                                5. Limitación de Responsabilidad
                            </h2>
                            <p class="text-body leading-relaxed mb-3">
                                El titular del sitio web no se responsabiliza
                                de:
                            </p>
                            <ul
                                class="list-disc list-inside space-y-2 text-body ml-4"
                            >
                                <li>
                                    Interrupciones, errores o fallos en el
                                    acceso al sitio web
                                </li>
                                <li>
                                    Contenidos o servicios prestados por
                                    terceros a través de enlaces externos
                                </li>
                                <li>
                                    Virus o elementos dañinos que puedan afectar
                                    al equipo del usuario
                                </li>
                                <li>
                                    Uso indebido que terceros puedan hacer del
                                    sitio web
                                </li>
                            </ul>
                        </section>

                        <section>
                            <h2 class="text-2xl font-bold text-heading mb-4">
                                6. Enlaces a Terceros
                            </h2>
                            <p class="text-body leading-relaxed">
                                Este sitio web puede contener enlaces a sitios
                                de terceros. El titular no se responsabiliza del
                                contenido, políticas de privacidad o prácticas
                                de estos sitios externos.
                            </p>
                        </section>

                        <section>
                            <h2 class="text-2xl font-bold text-heading mb-4">
                                7. Modificaciones
                            </h2>
                            <p class="text-body leading-relaxed">
                                El titular se reserva el derecho a modificar, en
                                cualquier momento y sin previo aviso, el
                                contenido del sitio web y las presentes
                                condiciones de uso.
                            </p>
                        </section>

                        <section>
                            <h2 class="text-2xl font-bold text-heading mb-4">
                                8. Legislación Aplicable y Jurisdicción
                            </h2>
                            <p class="text-body leading-relaxed">
                                Las presentes condiciones se rigen por la
                                legislación española. Para la resolución de
                                cualquier controversia, las partes se someten a
                                los Juzgados y Tribunales de {city}, renunciando
                                expresamente a cualquier otro fuero que pudiera
                                corresponderles.
                            </p>
                        </section>

                        <section>
                            <h2 class="text-2xl font-bold text-heading mb-4">
                                9. Contacto
                            </h2>
                            <p class="text-body leading-relaxed">
                                Para cualquier consulta relacionada con este
                                aviso legal, puede contactar en:
                            </p>
                            <p class="text-primary font-semibold mt-2">
                                Email: {email}
                            </p>
                        </section>
                        )
                    }
                    </div>
                </div>
            </div>
        </div>
    </section>

    <Footer />
</Layout>
